import{I as Ke,S as ce,i as fe,s as ue,F as de,J as pe,e as E,a as q,c as w,b as T,f as m,g as U,K as H,h as O,j as v,L as ae,M as ve,N as ye,O as ke,q as A,o as V,u as Ie,P as Je,y as K,t as z,m as Y,d as P,v as C,x as Be,p as Ve,Q as Qe,G as X,R as Me,T as Z,k as j,U as We,n as oe,V as re,A as Ee,B as we,C as Te,W as ie,D as Ce}from"./index.fe1973b3.js";import"./paths.dbe6eacd.js";function x(n,{delay:e=0,duration:t=400,easing:l=Ke}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:l,css:i=>`opacity: ${i*s}`}}const{window:qe}=Je,Ye=n=>({}),Re=n=>({}),Xe=n=>({}),Oe=n=>({});function Ze(n){let e,t,l,s,i,o,a,r,c;de(n[21]);const _=n[20].background,d=pe(_,n,n[19],Oe),h=n[20].foreground,b=pe(h,n,n[19],Re);return{c(){e=E("svelte-scroller-outer"),t=E("svelte-scroller-background-container"),l=E("svelte-scroller-background"),d&&d.c(),i=q(),o=E("svelte-scroller-foreground"),b&&b.c(),this.h()},l(f){e=w(f,"SVELTE-SCROLLER-OUTER",{class:!0});var u=T(e);t=w(u,"SVELTE-SCROLLER-BACKGROUND-CONTAINER",{class:!0,style:!0});var p=T(t);l=w(p,"SVELTE-SCROLLER-BACKGROUND",{class:!0});var y=T(l);d&&d.l(y),y.forEach(m),p.forEach(m),i=U(u),o=w(u,"SVELTE-SCROLLER-FOREGROUND",{class:!0});var k=T(o);b&&b.l(k),k.forEach(m),u.forEach(m),this.h()},h(){H(l,"class","svelte-xdbafy"),H(t,"class","background-container svelte-xdbafy"),H(t,"style",s=""+(n[5]+n[4])),H(o,"class","svelte-xdbafy"),H(e,"class","svelte-xdbafy")},m(f,u){O(f,e,u),v(e,t),v(t,l),d&&d.m(l,null),n[22](l),v(e,i),v(e,o),b&&b.m(o,null),n[23](o),n[24](e),a=!0,r||(c=ae(qe,"resize",n[21]),r=!0)},p(f,u){d&&d.p&&(!a||u[0]&524288)&&ve(d,_,f,f[19],a?ke(_,f[19],u,Xe):ye(f[19]),Oe),(!a||u[0]&48&&s!==(s=""+(f[5]+f[4])))&&H(t,"style",s),b&&b.p&&(!a||u[0]&524288)&&ve(b,h,f,f[19],a?ke(h,f[19],u,Ye):ye(f[19]),Re)},i(f){a||(A(d,f),A(b,f),a=!0)},o(f){V(d,f),V(b,f),a=!1},d(f){f&&m(e),d&&d.d(f),n[22](null),b&&b.d(f),n[23](null),n[24](null),r=!1,c()}}}const N=[];let $;if(typeof window<"u"){const n=()=>N.forEach(e=>e());window.addEventListener("scroll",n),window.addEventListener("resize",n)}if(typeof IntersectionObserver<"u"){const n=new Map,e=new IntersectionObserver((t,l)=>{t.forEach(s=>{const i=n.get(s.target),o=N.indexOf(i);s.isIntersecting?o===-1&&N.push(i):(i(),o!==-1&&N.splice(o,1))})},{rootMargin:"400px 0px"});$={add:({outer:t,update:l})=>{const{top:s,bottom:i}=t.getBoundingClientRect();s<window.innerHeight&&i>0&&N.push(l),n.set(t,l),e.observe(t)},remove:({outer:t,update:l})=>{const s=N.indexOf(l);s!==-1&&N.splice(s,1),n.delete(t),e.unobserve(t)}}}else $={add:({update:n})=>{N.push(n)},remove:({update:n})=>{const e=N.indexOf(n);e!==-1&&N.splice(e,1)}};function xe(n,e,t){let l,s,i,o,a,{$$slots:r={},$$scope:c}=e,{top:_=0}=e,{bottom:d=1}=e,{threshold:h=.5}=e,{query:b="section"}=e,{parallax:f=!1}=e,{index:u=0}=e,{count:p=0}=e,{offset:y=0}=e,{progress:k=0}=e,{visible:J=!1}=e,M,I,F,R,D,L=0,B,S=0,Q=1;Ie(()=>{D=I.querySelectorAll(b),t(7,p=D.length),ne();const g={outer:M,update:ne};return $.add(g),()=>$.remove(g)});function ne(){if(!I)return;const g=M.getBoundingClientRect();R=g.left,t(18,Q=g.right-R);const G=I.getBoundingClientRect(),_e=F.getBoundingClientRect();t(10,J=G.top<L&&G.bottom>0);const se=G.bottom-G.top,he=_e.bottom-_e.top,le=s-l;t(9,k=(l-G.top)/(se-le)),k<=0?(t(17,S=0),t(16,B=!1)):k>=1?(t(17,S=f?se-he:se-le),t(16,B=!1)):(t(17,S=f?Math.round(l-k*(he-le)):l),t(16,B=!0));for(let W=0;W<D.length;W++){const He=D[W],{top:ge}=He.getBoundingClientRect(),be=D[W+1],me=be?be.getBoundingClientRect().top:G.bottom;if(t(8,y=(i-ge)/(me-ge)),me>=i){t(6,u=W);break}}}function Ue(){t(0,L=qe.innerHeight)}function je(g){K[g?"unshift":"push"](()=>{F=g,t(3,F)})}function Fe(g){K[g?"unshift":"push"](()=>{I=g,t(2,I)})}function Ge(g){K[g?"unshift":"push"](()=>{M=g,t(1,M)})}return n.$$set=g=>{"top"in g&&t(11,_=g.top),"bottom"in g&&t(12,d=g.bottom),"threshold"in g&&t(13,h=g.threshold),"query"in g&&t(14,b=g.query),"parallax"in g&&t(15,f=g.parallax),"index"in g&&t(6,u=g.index),"count"in g&&t(7,p=g.count),"offset"in g&&t(8,y=g.offset),"progress"in g&&t(9,k=g.progress),"visible"in g&&t(10,J=g.visible),"$$scope"in g&&t(19,c=g.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2049&&(l=Math.round(_*L)),n.$$.dirty[0]&4097&&(s=Math.round(d*L)),n.$$.dirty[0]&8193&&(i=Math.round(h*L)),n.$$.dirty[0]&47104&&ne(),n.$$.dirty[0]&196608&&t(5,o=`
		position: ${B?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${S}px);
		z-index: 1;
	`),n.$$.dirty[0]&327680&&t(4,a=B?`width:${Q}px;`:"")},[L,M,I,F,a,o,u,p,y,k,J,_,d,h,b,f,B,S,Q,c,r,Ue,je,Fe,Ge]}class $e extends ce{constructor(e){super(),fe(this,e,xe,Ze,ue,{top:11,bottom:12,threshold:13,query:14,parallax:15,index:6,count:7,offset:8,progress:9,visible:10},null,[-1,-1])}}function De(n,e,t){const l=n.slice();return l[5]=e[t],l}function Le(n){let e,t,l,s=n[0],i=[];for(let o=0;o<s.length;o+=1)i[o]=ze(De(n,s,o));return{c(){e=E("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=w(o,"DIV",{class:!0});var a=T(e);for(let r=0;r<i.length;r+=1)i[r].l(a);a.forEach(m),this.h()},h(){C(e,"class","toc svelte-614t9i")},m(o,a){O(o,e,a);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);l=!0},p(o,a){if(a&1){s=o[0];let r;for(r=0;r<s.length;r+=1){const c=De(o,s,r);i[r]?i[r].p(c,a):(i[r]=ze(c),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}},i(o){l||(de(()=>{l&&(t||(t=X(e,x,{},!0)),t.run(1))}),l=!0)},o(o){t||(t=X(e,x,{},!1)),t.run(0),l=!1},d(o){o&&m(e),Me(i,o),o&&t&&t.end()}}}function ze(n){let e,t,l=n[5].displayName+"",s,i,o;return{c(){e=E("div"),t=E("a"),s=z(l),o=q(),this.h()},l(a){e=w(a,"DIV",{});var r=T(e);t=w(r,"A",{href:!0,class:!0});var c=T(t);s=P(c,l),c.forEach(m),o=U(r),r.forEach(m),this.h()},h(){var a;C(t,"href",i="#"+n[5].target),C(t,"class","svelte-614t9i"),Z(t,"active",((a=n[5])==null?void 0:a.current)===!0)},m(a,r){O(a,e,r),v(e,t),v(t,s),v(e,o)},p(a,r){var c;r&1&&l!==(l=a[5].displayName+"")&&j(s,l),r&1&&i!==(i="#"+a[5].target)&&C(t,"href",i),r&1&&Z(t,"active",((c=a[5])==null?void 0:c.current)===!0)},d(a){a&&m(e)}}}function et(n){let e,t,l,s,i,o,a,r,c=n[1]&&Le(n);return{c(){e=E("button"),t=E("span"),l=z("◒"),s=q(),c&&c.c(),i=Y(),this.h()},l(_){e=w(_,"BUTTON",{class:!0});var d=T(e);t=w(d,"SPAN",{});var h=T(t);l=P(h,"◒"),h.forEach(m),d.forEach(m),s=U(_),c&&c.l(_),i=Y(),this.h()},h(){C(e,"class","toc-button svelte-614t9i")},m(_,d){O(_,e,d),v(e,t),v(t,l),O(_,s,d),c&&c.m(_,d),O(_,i,d),o=!0,a||(r=[ae(window,"click",n[3]),ae(e,"click",n[2])],a=!0)},p(_,[d]){_[1]?c?(c.p(_,d),d&2&&A(c,1)):(c=Le(_),c.c(),A(c,1),c.m(i.parentNode,i)):c&&(Be(),V(c,1,1,()=>{c=null}),Ve())},i(_){o||(A(c),o=!0)},o(_){V(c),o=!1},d(_){_&&m(e),_&&m(s),c&&c.d(_),_&&m(i),a=!1,Qe(r)}}}function tt(n,e,t){let{items:l=[]}=e,s=!1;function i(){t(1,s=!s)}function o(){t(1,s=!1)}function a(r){!r.target.closest(".toc")&&!r.target.closest(".toc-button")&&o()}return n.$$set=r=>{"items"in r&&t(0,l=r.items)},[l,s,i,a]}class nt extends ce{constructor(e){super(),fe(this,e,tt,et,ue,{items:0})}}function Pe(n,e,t){const l=n.slice();return l[22]=e[t],l[24]=t,l}function st(n){let e,t;return{c(){e=E("p"),t=z("..."),this.h()},l(l){e=w(l,"P",{class:!0});var s=T(e);t=P(s,"..."),s.forEach(m),this.h()},h(){C(e,"class","svelte-1z072zb")},m(l,s){O(l,e,s),v(e,t)},p:oe,i:oe,o:oe,d(l){l&&m(e)}}}function lt(n){let e,t,l,s,i,o,a,r,c;t=new nt({props:{items:n[5]}});function _(f){n[14](f)}function d(f){n[15](f)}function h(f){n[16](f)}let b={top:"0",threshold:"0.5",bottom:"0.9",query:"article",$$slots:{foreground:[rt],background:[ot]},$$scope:{ctx:n}};return n[3]!==void 0&&(b.count=n[3]),n[1]!==void 0&&(b.index=n[1]),n[4]!==void 0&&(b.progress=n[4]),s=new $e({props:b}),K.push(()=>re(s,"count",_)),K.push(()=>re(s,"index",d)),K.push(()=>re(s,"progress",h)),{c(){e=E("div"),Ee(t.$$.fragment),l=q(),Ee(s.$$.fragment)},l(f){e=w(f,"DIV",{});var u=T(e);we(t.$$.fragment,u),l=U(u),we(s.$$.fragment,u),u.forEach(m)},m(f,u){O(f,e,u),Te(t,e,null),v(e,l),Te(s,e,null),c=!0},p(f,u){n=f;const p={};u&32&&(p.items=n[5]),t.$set(p);const y={};u&33554515&&(y.$$scope={dirty:u,ctx:n}),!i&&u&8&&(i=!0,y.count=n[3],ie(()=>i=!1)),!o&&u&2&&(o=!0,y.index=n[1],ie(()=>o=!1)),!a&&u&16&&(a=!0,y.progress=n[4],ie(()=>a=!1)),s.$set(y)},i(f){c||(A(t.$$.fragment,f),A(s.$$.fragment,f),de(()=>{c&&(r||(r=X(e,x,{delay:Ae},!0)),r.run(1))}),c=!0)},o(f){V(t.$$.fragment,f),V(s.$$.fragment,f),r||(r=X(e,x,{delay:Ae},!1)),r.run(0),c=!1},d(f){f&&m(e),Ce(t),Ce(s),f&&r&&r.end()}}}function ot(n){let e,t,l,s,i,o,a;return{c(){e=E("div"),t=z("index: "),l=z(n[1]),s=z(`
        poem: `),i=z(n[6]),o=z(`
        progress: `),a=z(n[4]),this.h()},l(r){e=w(r,"DIV",{slot:!0,class:!0});var c=T(e);t=P(c,"index: "),l=P(c,n[1]),s=P(c,`
        poem: `),i=P(c,n[6]),o=P(c,`
        progress: `),a=P(c,n[4]),c.forEach(m),this.h()},h(){C(e,"slot","background"),C(e,"class","svelte-1z072zb")},m(r,c){O(r,e,c),v(e,t),v(e,l),v(e,s),v(e,i),v(e,o),v(e,a)},p(r,c){c&2&&j(l,r[1]),c&64&&j(i,r[6]),c&16&&j(a,r[4])},d(r){r&&m(e)}}}function Ne(n){var s;let e,t=(((s=n[22].metadata)==null?void 0:s.created)||"")+"",l;return{c(){e=E("div"),l=z(t),this.h()},l(i){e=w(i,"DIV",{class:!0});var o=T(e);l=P(o,t),o.forEach(m),this.h()},h(){C(e,"class","date svelte-1z072zb")},m(i,o){O(i,e,o),v(e,l)},p(i,o){var a;o&1&&t!==(t=(((a=i[22].metadata)==null?void 0:a.created)||"")+"")&&j(l,t)},d(i){i&&m(e)}}}function Se(n){var b,f;let e,t,l=ee(n[22])+"",s,i,o,a,r=n[22].content+"",c,_,d,h=((f=(b=n[22])==null?void 0:b.metadata)==null?void 0:f.title)!==void 0&&Ne(n);return{c(){e=E("article"),t=E("p"),s=z(l),i=q(),h&&h.c(),o=q(),a=E("p"),c=z(r),_=q(),this.h()},l(u){e=w(u,"ARTICLE",{id:!0,class:!0});var p=T(e);t=w(p,"P",{class:!0});var y=T(t);s=P(y,l),y.forEach(m),i=U(p),h&&h.l(p),o=U(p),a=w(p,"P",{class:!0});var k=T(a);c=P(k,r),k.forEach(m),_=U(p),p.forEach(m),this.h()},h(){C(t,"class","title svelte-1z072zb"),C(a,"class","content svelte-1z072zb"),C(e,"id",d=te(n[22])),C(e,"class","svelte-1z072zb"),Z(e,"viewed",n[24]===n[1])},m(u,p){O(u,e,p),v(e,t),v(t,s),v(e,i),h&&h.m(e,null),v(e,o),v(e,a),v(a,c),v(e,_)},p(u,p){var y,k;p&1&&l!==(l=ee(u[22])+"")&&j(s,l),((k=(y=u[22])==null?void 0:y.metadata)==null?void 0:k.title)!==void 0?h?h.p(u,p):(h=Ne(u),h.c(),h.m(e,o)):h&&(h.d(1),h=null),p&1&&r!==(r=u[22].content+"")&&j(c,r),p&1&&d!==(d=te(u[22]))&&C(e,"id",d),p&2&&Z(e,"viewed",u[24]===u[1])},d(u){u&&m(e),h&&h.d()}}}function rt(n){let e,t=n[0],l=[];for(let s=0;s<t.length;s+=1)l[s]=Se(Pe(n,t,s));return{c(){e=E("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=w(s,"DIV",{slot:!0,class:!0});var i=T(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(m),this.h()},h(){C(e,"slot","foreground"),C(e,"class","svelte-1z072zb")},m(s,i){O(s,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,i){if(i&3){t=s[0];let o;for(o=0;o<t.length;o+=1){const a=Pe(s,t,o);l[o]?l[o].p(a,i):(l[o]=Se(a),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(s){s&&m(e),Me(l,s)}}}function it(n){let e,t,l,s;const i=[lt,st],o=[];function a(r,c){return r[2]?0:1}return e=a(n),t=o[e]=i[e](n),{c(){t.c(),l=Y()},l(r){t.l(r),l=Y()},m(r,c){o[e].m(r,c),O(r,l,c),s=!0},p(r,[c]){let _=e;e=a(r),e===_?o[e].p(r,c):(Be(),V(o[_],1,1,()=>{o[_]=null}),Ve(),t=o[e],t?t.p(r,c):(t=o[e]=i[e](r),t.c()),A(t,1),t.m(l.parentNode,l))},i(r){s||(A(t),s=!0)},o(r){V(t),s=!1},d(r){o[e].d(r),r&&m(l)}}}const at="https://api.github.com/repos/david-vanderhaar/verse-and-verve-data/contents/poems?ref=main",Ae=1e3;async function ct(n){if(n){const e=n.replace("#",""),t=document.getElementById(e);if(!t||t.getBoundingClientRect().top<window.innerHeight)return;t.scrollIntoView({behavior:"instant"})}}function ft(n){const e=n.split("END_METADATA");e[0]=e[0].replace("END_METADATA","");const l=e[0].split(`
`).reduce((i,o)=>{const[a,r]=o.split(": ");return i[a]=r,i},{}),s=e[1].trim();return{metadata:l,content:s}}function ut(n){return n.sort((e,t)=>{var i,o;const l=new Date((i=e.metadata)==null?void 0:i.created);return new Date((o=t.metadata)==null?void 0:o.created)-l})}function dt(n){return n.name.endsWith(".txt")}async function _t(n){const t=await(await fetch(n)).text();return ft(t)}function ee(n){var e,t;return((e=n==null?void 0:n.metadata)==null?void 0:e.title)||((t=n==null?void 0:n.metadata)==null?void 0:t.created)||""}function ht(n){var l,s;const e=((l=n==null?void 0:n.metadata)==null?void 0:l.title)||null;return[((s=n==null?void 0:n.metadata)==null?void 0:s.created)||null,e].filter(i=>i!==null).join(" - ")}function te(n){return ee(n).toLowerCase().replace(/ /g,"-")}function gt(n,e,t){let l,s,i,o,a,r,c;const _=We();let d,h,b=[],f=!1;Ie(async()=>{t(7,d=document.documentElement),t(8,h=window),await u(),h.location.hash&&await ct(h.location.hash),t(9,f=!0)});async function u(){const L=(await(await fetch(at)).json()).filter(dt).map(S=>_t(S.download_url)),B=await Promise.all(L);t(0,b=ut(B)),t(0,b=b.map((S,Q)=>({id:Q,...S})))}let p,y,k;function J(R,D){return R.map(L=>({displayName:ht(L),target:te(L),current:D!==void 0&&L.id===D}))}function M(R){p=R,t(3,p)}function I(R){y=R,t(1,y)}function F(R){k=R,t(4,k)}return n.$$.update=()=>{var R,D;n.$$.dirty&1&&t(2,l=b.length>0),n.$$.dirty&4&&l&&_("poemsLoaded",{poemsLoaded:l}),n.$$.dirty&3&&t(11,s=b[y]),n.$$.dirty&2048&&t(10,i=s==null?void 0:s.id),n.$$.dirty&2048&&t(6,o=ee(s)),n.$$.dirty&2048&&t(13,a=((R=s==null?void 0:s.metadata)==null?void 0:R.color)||"#eadcbd"),n.$$.dirty&2048&&t(12,r=((D=s==null?void 0:s.metadata)==null?void 0:D.text_color)||"#262422"),n.$$.dirty&8320&&(d==null||d.style.setProperty("--background-color",a)),n.$$.dirty&4224&&(d==null||d.style.setProperty("--text-color",r)),n.$$.dirty&2816&&f&&(h==null||h.history.replaceState(null,"",`#${te(s)}`)),n.$$.dirty&1025&&t(5,c=J(b,i))},[b,y,l,p,k,c,o,d,h,f,i,s,r,a,M,I,F]}class pt extends ce{constructor(e){super(),fe(this,e,gt,it,ue,{})}}export{pt as P,x as f};
