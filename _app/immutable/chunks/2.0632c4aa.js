import{I as He,S as fe,i as ue,s as de,F as le,J as pe,e as w,a as U,c as T,b as C,f as b,g as j,K as H,h as O,j as v,L as ce,M as ve,N as ye,O as ke,q as A,o as M,u as Ae,P as Ke,y as K,t as I,m as Z,d as N,v as E,x as Be,p as Ve,Q as Je,G as J,R as Me,T as x,k as z,U as Qe,V as ie,A as Ee,B as we,C as Te,W as ae,D as Ce}from"./index.fe1973b3.js";import"./paths.1736da08.js";function Q(n,{delay:e=0,duration:t=400,easing:l=He}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:l,css:r=>`opacity: ${r*s}`}}const{window:qe}=Ke,We=n=>({}),Re=n=>({}),Ye=n=>({}),Oe=n=>({});function Xe(n){let e,t,l,s,r,o,a,i,c;le(n[21]);const _=n[20].background,d=pe(_,n,n[19],Oe),h=n[20].foreground,m=pe(h,n,n[19],Re);return{c(){e=w("svelte-scroller-outer"),t=w("svelte-scroller-background-container"),l=w("svelte-scroller-background"),d&&d.c(),r=U(),o=w("svelte-scroller-foreground"),m&&m.c(),this.h()},l(f){e=T(f,"SVELTE-SCROLLER-OUTER",{class:!0});var u=C(e);t=T(u,"SVELTE-SCROLLER-BACKGROUND-CONTAINER",{class:!0,style:!0});var p=C(t);l=T(p,"SVELTE-SCROLLER-BACKGROUND",{class:!0});var y=C(l);d&&d.l(y),y.forEach(b),p.forEach(b),r=j(u),o=T(u,"SVELTE-SCROLLER-FOREGROUND",{class:!0});var k=C(o);m&&m.l(k),k.forEach(b),u.forEach(b),this.h()},h(){H(l,"class","svelte-xdbafy"),H(t,"class","background-container svelte-xdbafy"),H(t,"style",s=""+(n[5]+n[4])),H(o,"class","svelte-xdbafy"),H(e,"class","svelte-xdbafy")},m(f,u){O(f,e,u),v(e,t),v(t,l),d&&d.m(l,null),n[22](l),v(e,r),v(e,o),m&&m.m(o,null),n[23](o),n[24](e),a=!0,i||(c=ce(qe,"resize",n[21]),i=!0)},p(f,u){d&&d.p&&(!a||u[0]&524288)&&ve(d,_,f,f[19],a?ke(_,f[19],u,Ye):ye(f[19]),Oe),(!a||u[0]&48&&s!==(s=""+(f[5]+f[4])))&&H(t,"style",s),m&&m.p&&(!a||u[0]&524288)&&ve(m,h,f,f[19],a?ke(h,f[19],u,We):ye(f[19]),Re)},i(f){a||(A(d,f),A(m,f),a=!0)},o(f){M(d,f),M(m,f),a=!1},d(f){f&&b(e),d&&d.d(f),n[22](null),m&&m.d(f),n[23](null),n[24](null),i=!1,c()}}}const P=[];let $;if(typeof window<"u"){const n=()=>P.forEach(e=>e());window.addEventListener("scroll",n),window.addEventListener("resize",n)}if(typeof IntersectionObserver<"u"){const n=new Map,e=new IntersectionObserver((t,l)=>{t.forEach(s=>{const r=n.get(s.target),o=P.indexOf(r);s.isIntersecting?o===-1&&P.push(r):(r(),o!==-1&&P.splice(o,1))})},{rootMargin:"400px 0px"});$={add:({outer:t,update:l})=>{const{top:s,bottom:r}=t.getBoundingClientRect();s<window.innerHeight&&r>0&&P.push(l),n.set(t,l),e.observe(t)},remove:({outer:t,update:l})=>{const s=P.indexOf(l);s!==-1&&P.splice(s,1),n.delete(t),e.unobserve(t)}}}else $={add:({update:n})=>{P.push(n)},remove:({update:n})=>{const e=P.indexOf(n);e!==-1&&P.splice(e,1)}};function Ze(n,e,t){let l,s,r,o,a,{$$slots:i={},$$scope:c}=e,{top:_=0}=e,{bottom:d=1}=e,{threshold:h=.5}=e,{query:m="section"}=e,{parallax:f=!1}=e,{index:u=0}=e,{count:p=0}=e,{offset:y=0}=e,{progress:k=0}=e,{visible:W=!1}=e,q,B,F,R,D,L=0,V,S=0,Y=1;Ae(()=>{D=B.querySelectorAll(m),t(7,p=D.length),se();const g={outer:q,update:se};return $.add(g),()=>$.remove(g)});function se(){if(!B)return;const g=q.getBoundingClientRect();R=g.left,t(18,Y=g.right-R);const G=B.getBoundingClientRect(),_e=F.getBoundingClientRect();t(10,W=G.top<L&&G.bottom>0);const oe=G.bottom-G.top,he=_e.bottom-_e.top,re=s-l;t(9,k=(l-G.top)/(oe-re)),k<=0?(t(17,S=0),t(16,V=!1)):k>=1?(t(17,S=f?oe-he:oe-re),t(16,V=!1)):(t(17,S=f?Math.round(l-k*(he-re)):l),t(16,V=!0));for(let X=0;X<D.length;X++){const Ge=D[X],{top:ge}=Ge.getBoundingClientRect(),me=D[X+1],be=me?me.getBoundingClientRect().top:G.bottom;if(t(8,y=(r-ge)/(be-ge)),be>=r){t(6,u=X);break}}}function Ue(){t(0,L=qe.innerHeight)}function je(g){K[g?"unshift":"push"](()=>{F=g,t(3,F)})}function ze(g){K[g?"unshift":"push"](()=>{B=g,t(2,B)})}function Fe(g){K[g?"unshift":"push"](()=>{q=g,t(1,q)})}return n.$$set=g=>{"top"in g&&t(11,_=g.top),"bottom"in g&&t(12,d=g.bottom),"threshold"in g&&t(13,h=g.threshold),"query"in g&&t(14,m=g.query),"parallax"in g&&t(15,f=g.parallax),"index"in g&&t(6,u=g.index),"count"in g&&t(7,p=g.count),"offset"in g&&t(8,y=g.offset),"progress"in g&&t(9,k=g.progress),"visible"in g&&t(10,W=g.visible),"$$scope"in g&&t(19,c=g.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2049&&(l=Math.round(_*L)),n.$$.dirty[0]&4097&&(s=Math.round(d*L)),n.$$.dirty[0]&8193&&(r=Math.round(h*L)),n.$$.dirty[0]&47104&&se(),n.$$.dirty[0]&196608&&t(5,o=`
		position: ${V?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${S}px);
		z-index: 1;
	`),n.$$.dirty[0]&327680&&t(4,a=V?`width:${Y}px;`:"")},[L,q,B,F,a,o,u,p,y,k,W,_,d,h,m,f,V,S,Y,c,i,Ue,je,ze,Fe]}class xe extends fe{constructor(e){super(),ue(this,e,Ze,Xe,de,{top:11,bottom:12,threshold:13,query:14,parallax:15,index:6,count:7,offset:8,progress:9,visible:10},null,[-1,-1])}}function De(n,e,t){const l=n.slice();return l[5]=e[t],l}function Le(n){let e,t,l,s=n[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=Ie(De(n,s,o));return{c(){e=w("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var a=C(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(b),this.h()},h(){E(e,"class","toc svelte-614t9i")},m(o,a){O(o,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);l=!0},p(o,a){if(a&1){s=o[0];let i;for(i=0;i<s.length;i+=1){const c=De(o,s,i);r[i]?r[i].p(c,a):(r[i]=Ie(c),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}},i(o){l||(le(()=>{l&&(t||(t=J(e,Q,{},!0)),t.run(1))}),l=!0)},o(o){t||(t=J(e,Q,{},!1)),t.run(0),l=!1},d(o){o&&b(e),Me(r,o),o&&t&&t.end()}}}function Ie(n){let e,t,l=n[5].displayName+"",s,r,o;return{c(){e=w("div"),t=w("a"),s=I(l),o=U(),this.h()},l(a){e=T(a,"DIV",{});var i=C(e);t=T(i,"A",{href:!0,class:!0});var c=C(t);s=N(c,l),c.forEach(b),o=j(i),i.forEach(b),this.h()},h(){var a;E(t,"href",r="#"+n[5].target),E(t,"class","svelte-614t9i"),x(t,"active",((a=n[5])==null?void 0:a.current)===!0)},m(a,i){O(a,e,i),v(e,t),v(t,s),v(e,o)},p(a,i){var c;i&1&&l!==(l=a[5].displayName+"")&&z(s,l),i&1&&r!==(r="#"+a[5].target)&&E(t,"href",r),i&1&&x(t,"active",((c=a[5])==null?void 0:c.current)===!0)},d(a){a&&b(e)}}}function $e(n){let e,t,l,s,r,o,a,i,c=n[1]&&Le(n);return{c(){e=w("button"),t=w("span"),l=I("◒"),s=U(),c&&c.c(),r=Z(),this.h()},l(_){e=T(_,"BUTTON",{class:!0});var d=C(e);t=T(d,"SPAN",{});var h=C(t);l=N(h,"◒"),h.forEach(b),d.forEach(b),s=j(_),c&&c.l(_),r=Z(),this.h()},h(){E(e,"class","toc-button svelte-614t9i")},m(_,d){O(_,e,d),v(e,t),v(t,l),O(_,s,d),c&&c.m(_,d),O(_,r,d),o=!0,a||(i=[ce(window,"click",n[3]),ce(e,"click",n[2])],a=!0)},p(_,[d]){_[1]?c?(c.p(_,d),d&2&&A(c,1)):(c=Le(_),c.c(),A(c,1),c.m(r.parentNode,r)):c&&(Be(),M(c,1,1,()=>{c=null}),Ve())},i(_){o||(A(c),o=!0)},o(_){M(c),o=!1},d(_){_&&b(e),_&&b(s),c&&c.d(_),_&&b(r),a=!1,Je(i)}}}function et(n,e,t){let{items:l=[]}=e,s=!1;function r(){t(1,s=!s)}function o(){t(1,s=!1)}function a(i){!i.target.closest(".toc")&&!i.target.closest(".toc-button")&&o()}return n.$$set=i=>{"items"in i&&t(0,l=i.items)},[l,s,r,a]}class tt extends fe{constructor(e){super(),ue(this,e,et,$e,de,{items:0})}}function Ne(n,e,t){const l=n.slice();return l[22]=e[t],l[24]=t,l}function nt(n){let e,t,l,s;return{c(){e=w("div"),t=I("◒"),this.h()},l(r){e=T(r,"DIV",{id:!0,class:!0});var o=C(e);t=N(o,"◒"),o.forEach(b),this.h()},h(){E(e,"id","loading-indicator"),E(e,"class","svelte-63mlx2")},m(r,o){O(r,e,o),v(e,t),s=!0},p(r,o){},i(r){s||(le(()=>{s&&(l||(l=J(e,Q,{delay:ee/2},!0)),l.run(1))}),s=!0)},o(r){l||(l=J(e,Q,{delay:ee/2},!1)),l.run(0),s=!1},d(r){r&&b(e),r&&l&&l.end()}}}function lt(n){let e,t,l,s,r,o,a,i,c;t=new tt({props:{items:n[5]}});function _(f){n[14](f)}function d(f){n[15](f)}function h(f){n[16](f)}let m={top:"0",threshold:"0.5",bottom:"0.9",query:"article",$$slots:{foreground:[ot],background:[st]},$$scope:{ctx:n}};return n[3]!==void 0&&(m.count=n[3]),n[1]!==void 0&&(m.index=n[1]),n[4]!==void 0&&(m.progress=n[4]),s=new xe({props:m}),K.push(()=>ie(s,"count",_)),K.push(()=>ie(s,"index",d)),K.push(()=>ie(s,"progress",h)),{c(){e=w("div"),Ee(t.$$.fragment),l=U(),Ee(s.$$.fragment)},l(f){e=T(f,"DIV",{});var u=C(e);we(t.$$.fragment,u),l=j(u),we(s.$$.fragment,u),u.forEach(b)},m(f,u){O(f,e,u),Te(t,e,null),v(e,l),Te(s,e,null),c=!0},p(f,u){n=f;const p={};u&32&&(p.items=n[5]),t.$set(p);const y={};u&33554515&&(y.$$scope={dirty:u,ctx:n}),!r&&u&8&&(r=!0,y.count=n[3],ae(()=>r=!1)),!o&&u&2&&(o=!0,y.index=n[1],ae(()=>o=!1)),!a&&u&16&&(a=!0,y.progress=n[4],ae(()=>a=!1)),s.$set(y)},i(f){c||(A(t.$$.fragment,f),A(s.$$.fragment,f),le(()=>{c&&(i||(i=J(e,Q,{delay:ee},!0)),i.run(1))}),c=!0)},o(f){M(t.$$.fragment,f),M(s.$$.fragment,f),i||(i=J(e,Q,{delay:ee},!1)),i.run(0),c=!1},d(f){f&&b(e),Ce(t),Ce(s),f&&i&&i.end()}}}function st(n){let e,t,l,s,r,o,a;return{c(){e=w("div"),t=I("index: "),l=I(n[1]),s=I(`
        poem: `),r=I(n[6]),o=I(`
        progress: `),a=I(n[4]),this.h()},l(i){e=T(i,"DIV",{slot:!0,class:!0});var c=C(e);t=N(c,"index: "),l=N(c,n[1]),s=N(c,`
        poem: `),r=N(c,n[6]),o=N(c,`
        progress: `),a=N(c,n[4]),c.forEach(b),this.h()},h(){E(e,"slot","background"),E(e,"class","svelte-63mlx2")},m(i,c){O(i,e,c),v(e,t),v(e,l),v(e,s),v(e,r),v(e,o),v(e,a)},p(i,c){c&2&&z(l,i[1]),c&64&&z(r,i[6]),c&16&&z(a,i[4])},d(i){i&&b(e)}}}function Pe(n){var s;let e,t=(((s=n[22].metadata)==null?void 0:s.created)||"")+"",l;return{c(){e=w("div"),l=I(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=C(e);l=N(o,t),o.forEach(b),this.h()},h(){E(e,"class","date svelte-63mlx2")},m(r,o){O(r,e,o),v(e,l)},p(r,o){var a;o&1&&t!==(t=(((a=r[22].metadata)==null?void 0:a.created)||"")+"")&&z(l,t)},d(r){r&&b(e)}}}function Se(n){var m,f;let e,t,l=te(n[22])+"",s,r,o,a,i=n[22].content+"",c,_,d,h=((f=(m=n[22])==null?void 0:m.metadata)==null?void 0:f.title)!==void 0&&Pe(n);return{c(){e=w("article"),t=w("p"),s=I(l),r=U(),h&&h.c(),o=U(),a=w("p"),c=I(i),_=U(),this.h()},l(u){e=T(u,"ARTICLE",{id:!0,class:!0});var p=C(e);t=T(p,"P",{class:!0});var y=C(t);s=N(y,l),y.forEach(b),r=j(p),h&&h.l(p),o=j(p),a=T(p,"P",{class:!0});var k=C(a);c=N(k,i),k.forEach(b),_=j(p),p.forEach(b),this.h()},h(){E(t,"class","title svelte-63mlx2"),E(a,"class","content svelte-63mlx2"),E(e,"id",d=ne(n[22])),E(e,"class","svelte-63mlx2"),x(e,"viewed",n[24]===n[1])},m(u,p){O(u,e,p),v(e,t),v(t,s),v(e,r),h&&h.m(e,null),v(e,o),v(e,a),v(a,c),v(e,_)},p(u,p){var y,k;p&1&&l!==(l=te(u[22])+"")&&z(s,l),((k=(y=u[22])==null?void 0:y.metadata)==null?void 0:k.title)!==void 0?h?h.p(u,p):(h=Pe(u),h.c(),h.m(e,o)):h&&(h.d(1),h=null),p&1&&i!==(i=u[22].content+"")&&z(c,i),p&1&&d!==(d=ne(u[22]))&&E(e,"id",d),p&2&&x(e,"viewed",u[24]===u[1])},d(u){u&&b(e),h&&h.d()}}}function ot(n){let e,t=n[0],l=[];for(let s=0;s<t.length;s+=1)l[s]=Se(Ne(n,t,s));return{c(){e=w("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=C(e);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(b),this.h()},h(){E(e,"slot","foreground"),E(e,"class","svelte-63mlx2")},m(s,r){O(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&3){t=s[0];let o;for(o=0;o<t.length;o+=1){const a=Ne(s,t,o);l[o]?l[o].p(a,r):(l[o]=Se(a),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(s){s&&b(e),Me(l,s)}}}function rt(n){let e,t,l,s;const r=[lt,nt],o=[];function a(i,c){return i[2]?0:1}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),l=Z()},l(i){t.l(i),l=Z()},m(i,c){o[e].m(i,c),O(i,l,c),s=!0},p(i,[c]){let _=e;e=a(i),e===_?o[e].p(i,c):(Be(),M(o[_],1,1,()=>{o[_]=null}),Ve(),t=o[e],t?t.p(i,c):(t=o[e]=r[e](i),t.c()),A(t,1),t.m(l.parentNode,l))},i(i){s||(A(t),s=!0)},o(i){M(t),s=!1},d(i){o[e].d(i),i&&b(l)}}}const it="https://api.github.com/repos/david-vanderhaar/verse-and-verve-data/contents/poems?ref=main",ee=1e3;async function at(n){if(n){const e=n.replace("#",""),t=document.getElementById(e);if(!t||t.getBoundingClientRect().top<window.innerHeight)return;t.scrollIntoView({behavior:"instant"})}}function ct(n){const e=n.split("END_METADATA");e[0]=e[0].replace("END_METADATA","");const l=e[0].split(`
`).reduce((r,o)=>{const[a,i]=o.split(": ");return r[a]=i,r},{}),s=e[1].trim();return{metadata:l,content:s}}function ft(n){return n.sort((e,t)=>{var r,o;const l=new Date((r=e.metadata)==null?void 0:r.created);return new Date((o=t.metadata)==null?void 0:o.created)-l})}function ut(n){return n.name.endsWith(".txt")}async function dt(n){const t=await(await fetch(n)).text();return ct(t)}function te(n){var e,t;return((e=n==null?void 0:n.metadata)==null?void 0:e.title)||((t=n==null?void 0:n.metadata)==null?void 0:t.created)||""}function _t(n){var l,s;const e=((l=n==null?void 0:n.metadata)==null?void 0:l.title)||null;return[((s=n==null?void 0:n.metadata)==null?void 0:s.created)||null,e].filter(r=>r!==null).join(" - ")}function ne(n){return te(n).toLowerCase().replace(/ /g,"-")}function ht(n,e,t){let l,s,r,o,a,i,c;const _=Qe();let d,h,m=[],f=!1;Ae(async()=>{t(7,d=document.documentElement),t(8,h=window),await u(),h.location.hash&&await at(h.location.hash),t(9,f=!0)});async function u(){const L=(await(await fetch(it)).json()).filter(ut).map(S=>dt(S.download_url)),V=await Promise.all(L);t(0,m=ft(V)),t(0,m=m.map((S,Y)=>({id:Y,...S})))}let p,y,k;function W(R,D){return R.map(L=>({displayName:_t(L),target:ne(L),current:D!==void 0&&L.id===D}))}function q(R){p=R,t(3,p)}function B(R){y=R,t(1,y)}function F(R){k=R,t(4,k)}return n.$$.update=()=>{var R,D;n.$$.dirty&1&&t(2,l=m.length>0),n.$$.dirty&4&&l&&_("poemsLoaded",{poemsLoaded:l}),n.$$.dirty&3&&t(11,s=m[y]),n.$$.dirty&2048&&t(10,r=s==null?void 0:s.id),n.$$.dirty&2048&&t(6,o=te(s)),n.$$.dirty&2048&&t(13,a=((R=s==null?void 0:s.metadata)==null?void 0:R.color)||"#eadcbd"),n.$$.dirty&2048&&t(12,i=((D=s==null?void 0:s.metadata)==null?void 0:D.text_color)||"#262422"),n.$$.dirty&8320&&(d==null||d.style.setProperty("--background-color",a)),n.$$.dirty&4224&&(d==null||d.style.setProperty("--text-color",i)),n.$$.dirty&2816&&f&&(h==null||h.history.replaceState(null,"",`#${ne(s)}`)),n.$$.dirty&1025&&t(5,c=W(m,r))},[m,y,l,p,k,c,o,d,h,f,r,s,i,a,q,B,F]}class bt extends fe{constructor(e){super(),ue(this,e,ht,rt,de,{})}}export{bt as P,Q as f};
