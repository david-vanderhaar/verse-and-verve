import{S as O,i as S,s as j,e as T,b as w,H as R,h as m,o as B,k as D,q as k,l as P,m as b,r as y,n as E,D as i,J as F,a as N,c as x,u as M}from"../chunks/index.7a006170.js";import"../chunks/paths.52b972b0.js";function C(o,e,l){const a=o.slice();return a[4]=e[l],a}function H(o){let e,l;return{c(){e=D("p"),l=k("..."),this.h()},l(a){e=P(a,"P",{class:!0});var t=b(e);l=y(t,"..."),t.forEach(m),this.h()},h(){E(e,"class","svelte-usmp5e")},m(a,t){w(a,e,t),i(e,l)},p:R,d(a){a&&m(e)}}}function J(o){let e,l=o[0],a=[];for(let t=0;t<l.length;t+=1)a[t]=L(C(o,l,t));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=T()},l(t){for(let n=0;n<a.length;n+=1)a[n].l(t);e=T()},m(t,n){for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(t,n);w(t,e,n)},p(t,n){if(n&1){l=t[0];let s;for(s=0;s<l.length;s+=1){const c=C(t,l,s);a[s]?a[s].p(c,n):(a[s]=L(c),a[s].c(),a[s].m(e.parentNode,e))}for(;s<a.length;s+=1)a[s].d(1);a.length=l.length}},d(t){F(a,t),t&&m(e)}}}function L(o){var $,I;let e,l,a=((($=o[4].metadata)==null?void 0:$.title)||"")+"",t,n,s,c=(((I=o[4].metadata)==null?void 0:I.created)||"")+"",u,_,f,d=o[4].content+"",g,A;return{c(){e=D("article"),l=D("p"),t=k(a),n=N(),s=D("div"),u=k(c),_=N(),f=D("p"),g=k(d),A=N(),this.h()},l(p){e=P(p,"ARTICLE",{class:!0});var r=b(e);l=P(r,"P",{class:!0});var h=b(l);t=y(h,a),h.forEach(m),n=x(r),s=P(r,"DIV",{class:!0});var v=b(s);u=y(v,c),v.forEach(m),_=x(r),f=P(r,"P",{class:!0});var q=b(f);g=y(q,d),q.forEach(m),A=x(r),r.forEach(m),this.h()},h(){E(l,"class","title svelte-usmp5e"),E(s,"class","date svelte-usmp5e"),E(f,"class","content svelte-usmp5e"),E(e,"class","svelte-usmp5e")},m(p,r){w(p,e,r),i(e,l),i(l,t),i(e,n),i(e,s),i(s,u),i(e,_),i(e,f),i(f,g),i(e,A)},p(p,r){var h,v;r&1&&a!==(a=(((h=p[4].metadata)==null?void 0:h.title)||"")+"")&&M(t,a),r&1&&c!==(c=(((v=p[4].metadata)==null?void 0:v.created)||"")+"")&&M(u,c),r&1&&d!==(d=p[4].content+"")&&M(g,d)},d(p){p&&m(e)}}}function V(o){let e;function l(n,s){return n[0].length>0?J:H}let a=l(o),t=a(o);return{c(){t.c(),e=T()},l(n){t.l(n),e=T()},m(n,s){t.m(n,s),w(n,e,s)},p(n,[s]){a===(a=l(n))&&t?t.p(n,s):(t.d(1),t=a(n),t&&(t.c(),t.m(e.parentNode,e)))},i:R,o:R,d(n){t.d(n),n&&m(e)}}}const W="https://api.github.com/repos/david-vanderhaar/verse-and-verve-data/contents/poems?ref=main";function z(o){const e=o.split("END_METADATA");e[0]=e[0].replace("END_METADATA","");const a=e[0].split(`
`).reduce((n,s)=>{const[c,u]=s.split(": ");return n[c]=u,n},{}),t=e[1].trim();return{metadata:a,content:t}}function G(o){return o.sort((e,l)=>{var n,s;const a=new Date((n=e.metadata)==null?void 0:n.created);return new Date((s=l.metadata)==null?void 0:s.created)-a})}function K(o){return o.name.endsWith(".txt")}async function Q(o){const l=await(await fetch(o)).text();return z(l)}function U(o,e,l){let a=[];B(()=>{t()});async function t(){const c=(await(await fetch(W)).json()).filter(K).map(_=>Q(_.download_url)),u=await Promise.all(c);l(0,a=G(u))}return[a]}class Z extends O{constructor(e){super(),S(this,e,U,V,j,{})}}export{Z as component};
