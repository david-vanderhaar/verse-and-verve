import{S as ie,i as ae,s as ce,K as Pe,C as ge,k as w,a as M,l as T,m as C,h as m,c as V,L as F,b as z,E as v,M as oe,F as be,G as me,H as pe,g as A,d as I,o as Ae,N as Ke,w as H,O as je,q as L,e as J,r as D,n as E,v as Be,f as Ie,P as Qe,Q as ve,R as Me,T as X,u as q,I as ne,U as se,y as ke,z as ye,A as Ee,V as le,B as we}from"../chunks/index.80d00c43.js";import"../chunks/paths.ba861d4f.js";const{window:Ve}=Ke,We=n=>({}),Te=n=>({}),Je=n=>({}),Ce=n=>({});function Xe(n){let e,t,s,o,r,l,a,i,c;Pe(n[21]);const u=n[20].background,d=ge(u,n,n[19],Ce),f=n[20].foreground,b=ge(f,n,n[19],Te);return{c(){e=w("svelte-scroller-outer"),t=w("svelte-scroller-background-container"),s=w("svelte-scroller-background"),d&&d.c(),r=M(),l=w("svelte-scroller-foreground"),b&&b.c(),this.h()},l(h){e=T(h,"SVELTE-SCROLLER-OUTER",{class:!0});var _=C(e);t=T(_,"SVELTE-SCROLLER-BACKGROUND-CONTAINER",{class:!0,style:!0});var p=C(t);s=T(p,"SVELTE-SCROLLER-BACKGROUND",{class:!0});var O=C(s);d&&d.l(O),O.forEach(m),p.forEach(m),r=V(_),l=T(_,"SVELTE-SCROLLER-FOREGROUND",{class:!0});var k=C(l);b&&b.l(k),k.forEach(m),_.forEach(m),this.h()},h(){F(s,"class","svelte-xdbafy"),F(t,"class","background-container svelte-xdbafy"),F(t,"style",o=""+(n[5]+n[4])),F(l,"class","svelte-xdbafy"),F(e,"class","svelte-xdbafy")},m(h,_){z(h,e,_),v(e,t),v(t,s),d&&d.m(s,null),n[22](s),v(e,r),v(e,l),b&&b.m(l,null),n[23](l),n[24](e),a=!0,i||(c=oe(Ve,"resize",n[21]),i=!0)},p(h,_){d&&d.p&&(!a||_[0]&524288)&&be(d,u,h,h[19],a?pe(u,h[19],_,Je):me(h[19]),Ce),(!a||_[0]&48&&o!==(o=""+(h[5]+h[4])))&&F(t,"style",o),b&&b.p&&(!a||_[0]&524288)&&be(b,f,h,h[19],a?pe(f,h[19],_,We):me(h[19]),Te)},i(h){a||(A(d,h),A(b,h),a=!0)},o(h){I(d,h),I(b,h),a=!1},d(h){h&&m(e),d&&d.d(h),n[22](null),b&&b.d(h),n[23](null),n[24](null),i=!1,c()}}}const S=[];let Y;if(typeof window<"u"){const n=()=>S.forEach(e=>e());window.addEventListener("scroll",n),window.addEventListener("resize",n)}if(typeof IntersectionObserver<"u"){const n=new Map,e=new IntersectionObserver((t,s)=>{t.forEach(o=>{const r=n.get(o.target),l=S.indexOf(r);o.isIntersecting?l===-1&&S.push(r):(r(),l!==-1&&S.splice(l,1))})},{rootMargin:"400px 0px"});Y={add:({outer:t,update:s})=>{const{top:o,bottom:r}=t.getBoundingClientRect();o<window.innerHeight&&r>0&&S.push(s),n.set(t,s),e.observe(t)},remove:({outer:t,update:s})=>{const o=S.indexOf(s);o!==-1&&S.splice(o,1),n.delete(t),e.unobserve(t)}}}else Y={add:({update:n})=>{S.push(n)},remove:({update:n})=>{const e=S.indexOf(n);e!==-1&&S.splice(e,1)}};function Ye(n,e,t){let s,o,r,l,a,{$$slots:i={},$$scope:c}=e,{top:u=0}=e,{bottom:d=1}=e,{threshold:f=.5}=e,{query:b="section"}=e,{parallax:h=!1}=e,{index:_=0}=e,{count:p=0}=e,{offset:O=0}=e,{progress:k=0}=e,{visible:K=!1}=e,y,R,N,W,P,B=0,U,j=0,x=1;Ae(()=>{P=R.querySelectorAll(b),t(7,p=P.length),$();const g={outer:y,update:$};return Y.add(g),()=>Y.remove(g)});function $(){if(!R)return;const g=y.getBoundingClientRect();W=g.left,t(18,x=g.right-W);const G=R.getBoundingClientRect(),fe=N.getBoundingClientRect();t(10,K=G.top<B&&G.bottom>0);const ee=G.bottom-G.top,ue=fe.bottom-fe.top,te=o-s;t(9,k=(s-G.top)/(ee-te)),k<=0?(t(17,j=0),t(16,U=!1)):k>=1?(t(17,j=h?ee-ue:ee-te),t(16,U=!1)):(t(17,j=h?Math.round(s-k*(ue-te)):s),t(16,U=!0));for(let Q=0;Q<P.length;Q++){const He=P[Q],{top:de}=He.getBoundingClientRect(),_e=P[Q+1],he=_e?_e.getBoundingClientRect().top:G.bottom;if(t(8,O=(r-de)/(he-de)),he>=r){t(6,_=Q);break}}}function qe(){t(0,B=Ve.innerHeight)}function Ue(g){H[g?"unshift":"push"](()=>{N=g,t(3,N)})}function Ge(g){H[g?"unshift":"push"](()=>{R=g,t(2,R)})}function Fe(g){H[g?"unshift":"push"](()=>{y=g,t(1,y)})}return n.$$set=g=>{"top"in g&&t(11,u=g.top),"bottom"in g&&t(12,d=g.bottom),"threshold"in g&&t(13,f=g.threshold),"query"in g&&t(14,b=g.query),"parallax"in g&&t(15,h=g.parallax),"index"in g&&t(6,_=g.index),"count"in g&&t(7,p=g.count),"offset"in g&&t(8,O=g.offset),"progress"in g&&t(9,k=g.progress),"visible"in g&&t(10,K=g.visible),"$$scope"in g&&t(19,c=g.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2049&&(s=Math.round(u*B)),n.$$.dirty[0]&4097&&(o=Math.round(d*B)),n.$$.dirty[0]&8193&&(r=Math.round(f*B)),n.$$.dirty[0]&47104&&$(),n.$$.dirty[0]&196608&&t(5,l=`
		position: ${U?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${j}px);
		z-index: 1;
	`),n.$$.dirty[0]&327680&&t(4,a=U?`width:${x}px;`:"")},[B,y,R,N,a,l,_,p,O,k,K,u,d,f,b,h,U,j,x,c,i,qe,Ue,Ge,Fe]}class Ze extends ie{constructor(e){super(),ae(this,e,Ye,Xe,ce,{top:11,bottom:12,threshold:13,query:14,parallax:15,index:6,count:7,offset:8,progress:9,visible:10},null,[-1,-1])}}function Oe(n,{delay:e=0,duration:t=400,easing:s=je}={}){const o=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:r=>`opacity: ${r*o}`}}function Re(n,e,t){const s=n.slice();return s[5]=e[t],s}function ze(n){let e,t,s,o=n[0],r=[];for(let l=0;l<o.length;l+=1)r[l]=Le(Re(n,o,l));return{c(){e=w("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=T(l,"DIV",{class:!0});var a=C(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(m),this.h()},h(){E(e,"class","toc svelte-614t9i")},m(l,a){z(l,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);s=!0},p(l,a){if(a&1){o=l[0];let i;for(i=0;i<o.length;i+=1){const c=Re(l,o,i);r[i]?r[i].p(c,a):(r[i]=Le(c),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},i(l){s||(Pe(()=>{s&&(t||(t=ve(e,Oe,{},!0)),t.run(1))}),s=!0)},o(l){t||(t=ve(e,Oe,{},!1)),t.run(0),s=!1},d(l){l&&m(e),Me(r,l),l&&t&&t.end()}}}function Le(n){let e,t,s=n[5].displayName+"",o,r,l;return{c(){e=w("div"),t=w("a"),o=L(s),l=M(),this.h()},l(a){e=T(a,"DIV",{});var i=C(e);t=T(i,"A",{href:!0,class:!0});var c=C(t);o=D(c,s),c.forEach(m),l=V(i),i.forEach(m),this.h()},h(){var a;E(t,"href",r="#"+n[5].target),E(t,"class","svelte-614t9i"),X(t,"active",((a=n[5])==null?void 0:a.current)===!0)},m(a,i){z(a,e,i),v(e,t),v(t,o),v(e,l)},p(a,i){var c;i&1&&s!==(s=a[5].displayName+"")&&q(o,s),i&1&&r!==(r="#"+a[5].target)&&E(t,"href",r),i&1&&X(t,"active",((c=a[5])==null?void 0:c.current)===!0)},d(a){a&&m(e)}}}function xe(n){let e,t,s,o,r,l,a,i,c=n[1]&&ze(n);return{c(){e=w("button"),t=w("span"),s=L("◒"),o=M(),c&&c.c(),r=J(),this.h()},l(u){e=T(u,"BUTTON",{class:!0});var d=C(e);t=T(d,"SPAN",{});var f=C(t);s=D(f,"◒"),f.forEach(m),d.forEach(m),o=V(u),c&&c.l(u),r=J(),this.h()},h(){E(e,"class","toc-button svelte-614t9i")},m(u,d){z(u,e,d),v(e,t),v(t,s),z(u,o,d),c&&c.m(u,d),z(u,r,d),l=!0,a||(i=[oe(window,"click",n[3]),oe(e,"click",n[2])],a=!0)},p(u,[d]){u[1]?c?(c.p(u,d),d&2&&A(c,1)):(c=ze(u),c.c(),A(c,1),c.m(r.parentNode,r)):c&&(Be(),I(c,1,1,()=>{c=null}),Ie())},i(u){l||(A(c),l=!0)},o(u){I(c),l=!1},d(u){u&&m(e),u&&m(o),c&&c.d(u),u&&m(r),a=!1,Qe(i)}}}function $e(n,e,t){let{items:s=[]}=e,o=!1;function r(){t(1,o=!o)}function l(){t(1,o=!1)}function a(i){!i.target.closest(".toc")&&!i.target.closest(".toc-button")&&l()}return n.$$set=i=>{"items"in i&&t(0,s=i.items)},[s,o,r,a]}class et extends ie{constructor(e){super(),ae(this,e,$e,xe,ce,{items:0})}}function De(n,e,t){const s=n.slice();return s[19]=e[t],s[21]=t,s}function tt(n){let e,t;return{c(){e=w("p"),t=L("..."),this.h()},l(s){e=T(s,"P",{class:!0});var o=C(e);t=D(o,"..."),o.forEach(m),this.h()},h(){E(e,"class","svelte-1z072zb")},m(s,o){z(s,e,o),v(e,t)},p:ne,i:ne,o:ne,d(s){s&&m(e)}}}function nt(n){let e,t,s,o,r,l,a;e=new et({props:{items:n[4]}});function i(f){n[12](f)}function c(f){n[13](f)}function u(f){n[14](f)}let d={top:"0",threshold:"0.5",bottom:"0.9",query:"article",$$slots:{foreground:[lt],background:[st]},$$scope:{ctx:n}};return n[2]!==void 0&&(d.count=n[2]),n[1]!==void 0&&(d.index=n[1]),n[3]!==void 0&&(d.progress=n[3]),s=new Ze({props:d}),H.push(()=>se(s,"count",i)),H.push(()=>se(s,"index",c)),H.push(()=>se(s,"progress",u)),{c(){ke(e.$$.fragment),t=M(),ke(s.$$.fragment)},l(f){ye(e.$$.fragment,f),t=V(f),ye(s.$$.fragment,f)},m(f,b){Ee(e,f,b),z(f,t,b),Ee(s,f,b),a=!0},p(f,b){const h={};b&16&&(h.items=f[4]),e.$set(h);const _={};b&4194347&&(_.$$scope={dirty:b,ctx:f}),!o&&b&4&&(o=!0,_.count=f[2],le(()=>o=!1)),!r&&b&2&&(r=!0,_.index=f[1],le(()=>r=!1)),!l&&b&8&&(l=!0,_.progress=f[3],le(()=>l=!1)),s.$set(_)},i(f){a||(A(e.$$.fragment,f),A(s.$$.fragment,f),a=!0)},o(f){I(e.$$.fragment,f),I(s.$$.fragment,f),a=!1},d(f){we(e,f),f&&m(t),we(s,f)}}}function st(n){let e,t,s,o,r,l,a;return{c(){e=w("div"),t=L("index: "),s=L(n[1]),o=L(`
      poem: `),r=L(n[5]),l=L(`
      progress: `),a=L(n[3]),this.h()},l(i){e=T(i,"DIV",{slot:!0,class:!0});var c=C(e);t=D(c,"index: "),s=D(c,n[1]),o=D(c,`
      poem: `),r=D(c,n[5]),l=D(c,`
      progress: `),a=D(c,n[3]),c.forEach(m),this.h()},h(){E(e,"slot","background"),E(e,"class","svelte-1z072zb")},m(i,c){z(i,e,c),v(e,t),v(e,s),v(e,o),v(e,r),v(e,l),v(e,a)},p(i,c){c&2&&q(s,i[1]),c&32&&q(r,i[5]),c&8&&q(a,i[3])},d(i){i&&m(e)}}}function Ne(n){var o;let e,t=(((o=n[19].metadata)==null?void 0:o.created)||"")+"",s;return{c(){e=w("div"),s=L(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var l=C(e);s=D(l,t),l.forEach(m),this.h()},h(){E(e,"class","date svelte-1z072zb")},m(r,l){z(r,e,l),v(e,s)},p(r,l){var a;l&1&&t!==(t=(((a=r[19].metadata)==null?void 0:a.created)||"")+"")&&q(s,t)},d(r){r&&m(e)}}}function Se(n){var b,h;let e,t,s=Z(n[19])+"",o,r,l,a,i=n[19].content+"",c,u,d,f=((h=(b=n[19])==null?void 0:b.metadata)==null?void 0:h.title)!==void 0&&Ne(n);return{c(){e=w("article"),t=w("p"),o=L(s),r=M(),f&&f.c(),l=M(),a=w("p"),c=L(i),u=M(),this.h()},l(_){e=T(_,"ARTICLE",{id:!0,class:!0});var p=C(e);t=T(p,"P",{class:!0});var O=C(t);o=D(O,s),O.forEach(m),r=V(p),f&&f.l(p),l=V(p),a=T(p,"P",{class:!0});var k=C(a);c=D(k,i),k.forEach(m),u=V(p),p.forEach(m),this.h()},h(){E(t,"class","title svelte-1z072zb"),E(a,"class","content svelte-1z072zb"),E(e,"id",d=re(n[19])),E(e,"class","svelte-1z072zb"),X(e,"viewed",n[21]===n[1])},m(_,p){z(_,e,p),v(e,t),v(t,o),v(e,r),f&&f.m(e,null),v(e,l),v(e,a),v(a,c),v(e,u)},p(_,p){var O,k;p&1&&s!==(s=Z(_[19])+"")&&q(o,s),((k=(O=_[19])==null?void 0:O.metadata)==null?void 0:k.title)!==void 0?f?f.p(_,p):(f=Ne(_),f.c(),f.m(e,l)):f&&(f.d(1),f=null),p&1&&i!==(i=_[19].content+"")&&q(c,i),p&1&&d!==(d=re(_[19]))&&E(e,"id",d),p&2&&X(e,"viewed",_[21]===_[1])},d(_){_&&m(e),f&&f.d()}}}function lt(n){let e,t=n[0],s=[];for(let o=0;o<t.length;o+=1)s[o]=Se(De(n,t,o));return{c(){e=w("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=T(o,"DIV",{slot:!0,class:!0});var r=C(e);for(let l=0;l<s.length;l+=1)s[l].l(r);r.forEach(m),this.h()},h(){E(e,"slot","foreground"),E(e,"class","svelte-1z072zb")},m(o,r){z(o,e,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(o,r){if(r&3){t=o[0];let l;for(l=0;l<t.length;l+=1){const a=De(o,t,l);s[l]?s[l].p(a,r):(s[l]=Se(a),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d(o){o&&m(e),Me(s,o)}}}function ot(n){let e,t,s,o;const r=[nt,tt],l=[];function a(i,c){return i[6]?0:1}return e=a(n),t=l[e]=r[e](n),{c(){t.c(),s=J()},l(i){t.l(i),s=J()},m(i,c){l[e].m(i,c),z(i,s,c),o=!0},p(i,[c]){let u=e;e=a(i),e===u?l[e].p(i,c):(Be(),I(l[u],1,1,()=>{l[u]=null}),Ie(),t=l[e],t?t.p(i,c):(t=l[e]=r[e](i),t.c()),A(t,1),t.m(s.parentNode,s))},i(i){o||(A(t),o=!0)},o(i){I(t),o=!1},d(i){l[e].d(i),i&&m(s)}}}const rt="https://api.github.com/repos/david-vanderhaar/verse-and-verve-data/contents/poems?ref=main";function it(n){const e=n.split("END_METADATA");e[0]=e[0].replace("END_METADATA","");const s=e[0].split(`
`).reduce((r,l)=>{const[a,i]=l.split(": ");return r[a]=i,r},{}),o=e[1].trim();return{metadata:s,content:o}}function at(n){return n.sort((e,t)=>{var r,l;const s=new Date((r=e.metadata)==null?void 0:r.created);return new Date((l=t.metadata)==null?void 0:l.created)-s})}function ct(n){return n.name.endsWith(".txt")}async function ft(n){const t=await(await fetch(n)).text();return it(t)}function Z(n){var e,t;return((e=n==null?void 0:n.metadata)==null?void 0:e.title)||((t=n==null?void 0:n.metadata)==null?void 0:t.created)||""}function ut(n){var s,o;const e=((s=n==null?void 0:n.metadata)==null?void 0:s.title)||null;return[((o=n==null?void 0:n.metadata)==null?void 0:o.created)||null,e].filter(r=>r!==null).join(" - ")}function re(n){return Z(n).toLowerCase().replace(/ /g,"-")}function dt(n,e,t){let s,o,r,l,a,i,c,u,d=[];Ae(()=>{t(7,u=document.documentElement),f()});async function f(){const N=(await(await fetch(rt)).json()).filter(ct).map(P=>ft(P.download_url)),W=await Promise.all(N);t(0,d=at(W)),t(0,d=d.map((P,B)=>({id:B,...P})))}let b,h,_;function p(y,R){return console.log("getTableOfContents",R),y.map(N=>({displayName:ut(N),target:re(N),current:R!==void 0&&N.id===R}))}function O(y){b=y,t(2,b)}function k(y){h=y,t(1,h)}function K(y){_=y,t(3,_)}return n.$$.update=()=>{var y,R;n.$$.dirty&1&&t(6,s=d.length>0),n.$$.dirty&3&&t(11,o=d[h]),n.$$.dirty&2048&&t(8,r=o==null?void 0:o.id),n.$$.dirty&2048&&t(5,l=Z(o)),n.$$.dirty&2048&&t(10,a=((y=o==null?void 0:o.metadata)==null?void 0:y.color)||"#eadcbd"),n.$$.dirty&2048&&t(9,i=((R=o==null?void 0:o.metadata)==null?void 0:R.text_color)||"#262422"),n.$$.dirty&1152&&(u==null||u.style.setProperty("--background-color",a)),n.$$.dirty&640&&(u==null||u.style.setProperty("--text-color",i)),n.$$.dirty&257&&t(4,c=p(d,r))},[d,h,b,_,c,l,s,u,r,i,a,o,O,k,K]}class gt extends ie{constructor(e){super(),ae(this,e,dt,ot,ce,{})}}export{gt as component};
