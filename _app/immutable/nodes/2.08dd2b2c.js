import{S as ve,i as ke,s as Ee,J as De,C as ce,k as y,a as j,l as w,m as R,h as v,c as J,K as B,b as P,D as b,L as Pe,E as ae,F as ue,G as fe,g as F,d as H,o as ye,M as Se,w as I,e as de,f as Ae,v as Me,q as O,r as T,n as C,H as x,N as $,y as Ne,z as Be,A as Ie,O as ee,B as qe,u as q,P as Ve,Q as _e}from"../chunks/index.d7fd8aed.js";import"../chunks/paths.29c61809.js";const{window:we}=Se,ze=o=>({}),ge=o=>({}),Ge=o=>({}),he=o=>({});function Ue(o){let e,t,n,r,l,s,u,i,d;De(o[21]);const f=o[20].background,c=ce(f,o,o[19],he),p=o[20].foreground,h=ce(p,o,o[19],ge);return{c(){e=y("svelte-scroller-outer"),t=y("svelte-scroller-background-container"),n=y("svelte-scroller-background"),c&&c.c(),l=j(),s=y("svelte-scroller-foreground"),h&&h.c(),this.h()},l(a){e=w(a,"SVELTE-SCROLLER-OUTER",{class:!0});var g=R(e);t=w(g,"SVELTE-SCROLLER-BACKGROUND-CONTAINER",{class:!0,style:!0});var m=R(t);n=w(m,"SVELTE-SCROLLER-BACKGROUND",{class:!0});var k=R(n);c&&c.l(k),k.forEach(v),m.forEach(v),l=J(g),s=w(g,"SVELTE-SCROLLER-FOREGROUND",{class:!0});var E=R(s);h&&h.l(E),E.forEach(v),g.forEach(v),this.h()},h(){B(n,"class","svelte-xdbafy"),B(t,"class","background-container svelte-xdbafy"),B(t,"style",r=""+(o[5]+o[4])),B(s,"class","svelte-xdbafy"),B(e,"class","svelte-xdbafy")},m(a,g){P(a,e,g),b(e,t),b(t,n),c&&c.m(n,null),o[22](n),b(e,l),b(e,s),h&&h.m(s,null),o[23](s),o[24](e),u=!0,i||(d=Pe(we,"resize",o[21]),i=!0)},p(a,g){c&&c.p&&(!u||g[0]&524288)&&ae(c,f,a,a[19],u?fe(f,a[19],g,Ge):ue(a[19]),he),(!u||g[0]&48&&r!==(r=""+(a[5]+a[4])))&&B(t,"style",r),h&&h.p&&(!u||g[0]&524288)&&ae(h,p,a,a[19],u?fe(p,a[19],g,ze):ue(a[19]),ge)},i(a){u||(F(c,a),F(h,a),u=!0)},o(a){H(c,a),H(h,a),u=!1},d(a){a&&v(e),c&&c.d(a),o[22](null),h&&h.d(a),o[23](null),o[24](null),i=!1,d()}}}const L=[];let Q;if(typeof window<"u"){const o=()=>L.forEach(e=>e());window.addEventListener("scroll",o),window.addEventListener("resize",o)}if(typeof IntersectionObserver<"u"){const o=new Map,e=new IntersectionObserver((t,n)=>{t.forEach(r=>{const l=o.get(r.target),s=L.indexOf(l);r.isIntersecting?s===-1&&L.push(l):(l(),s!==-1&&L.splice(s,1))})},{rootMargin:"400px 0px"});Q={add:({outer:t,update:n})=>{const{top:r,bottom:l}=t.getBoundingClientRect();r<window.innerHeight&&l>0&&L.push(n),o.set(t,n),e.observe(t)},remove:({outer:t,update:n})=>{const r=L.indexOf(n);r!==-1&&L.splice(r,1),o.delete(t),e.unobserve(t)}}}else Q={add:({update:o})=>{L.push(o)},remove:({update:o})=>{const e=L.indexOf(o);e!==-1&&L.splice(e,1)}};function Fe(o,e,t){let n,r,l,s,u,{$$slots:i={},$$scope:d}=e,{top:f=0}=e,{bottom:c=1}=e,{threshold:p=.5}=e,{query:h="section"}=e,{parallax:a=!1}=e,{index:g=0}=e,{count:m=0}=e,{offset:k=0}=e,{progress:E=0}=e,{visible:V=!1}=e,D,S,K,oe,z,A=0,M,G=0,W=1;ye(()=>{z=S.querySelectorAll(h),t(7,m=z.length),X();const _={outer:D,update:X};return Q.add(_),()=>Q.remove(_)});function X(){if(!S)return;const _=D.getBoundingClientRect();oe=_.left,t(18,W=_.right-oe);const N=S.getBoundingClientRect(),ne=K.getBoundingClientRect();t(10,V=N.top<A&&N.bottom>0);const Y=N.bottom-N.top,se=ne.bottom-ne.top,Z=r-n;t(9,E=(n-N.top)/(Y-Z)),E<=0?(t(17,G=0),t(16,M=!1)):E>=1?(t(17,G=a?Y-se:Y-Z),t(16,M=!1)):(t(17,G=a?Math.round(n-E*(se-Z)):n),t(16,M=!0));for(let U=0;U<z.length;U++){const Ce=z[U],{top:re}=Ce.getBoundingClientRect(),le=z[U+1],ie=le?le.getBoundingClientRect().top:N.bottom;if(t(8,k=(l-re)/(ie-re)),ie>=l){t(6,g=U);break}}}function Re(){t(0,A=we.innerHeight)}function Le(_){I[_?"unshift":"push"](()=>{K=_,t(3,K)})}function Oe(_){I[_?"unshift":"push"](()=>{S=_,t(2,S)})}function Te(_){I[_?"unshift":"push"](()=>{D=_,t(1,D)})}return o.$$set=_=>{"top"in _&&t(11,f=_.top),"bottom"in _&&t(12,c=_.bottom),"threshold"in _&&t(13,p=_.threshold),"query"in _&&t(14,h=_.query),"parallax"in _&&t(15,a=_.parallax),"index"in _&&t(6,g=_.index),"count"in _&&t(7,m=_.count),"offset"in _&&t(8,k=_.offset),"progress"in _&&t(9,E=_.progress),"visible"in _&&t(10,V=_.visible),"$$scope"in _&&t(19,d=_.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&2049&&(n=Math.round(f*A)),o.$$.dirty[0]&4097&&(r=Math.round(c*A)),o.$$.dirty[0]&8193&&(l=Math.round(p*A)),o.$$.dirty[0]&47104&&X(),o.$$.dirty[0]&196608&&t(5,s=`
		position: ${M?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${G}px);
		z-index: 1;
	`),o.$$.dirty[0]&327680&&t(4,u=M?`width:${W}px;`:"")},[A,D,S,K,u,s,g,m,k,E,V,f,c,p,h,a,M,G,W,d,i,Re,Le,Oe,Te]}class He extends ve{constructor(e){super(),ke(this,e,Fe,Ue,Ee,{top:11,bottom:12,threshold:13,query:14,parallax:15,index:6,count:7,offset:8,progress:9,visible:10},null,[-1,-1])}}function me(o,e,t){const n=o.slice();return n[15]=e[t],n[17]=t,n}function Ke(o){let e,t;return{c(){e=y("p"),t=O("..."),this.h()},l(n){e=w(n,"P",{class:!0});var r=R(e);t=T(r,"..."),r.forEach(v),this.h()},h(){C(e,"class","svelte-19dopro")},m(n,r){P(n,e,r),b(e,t)},p:x,i:x,o:x,d(n){n&&v(e)}}}function je(o){let e,t,n,r,l;function s(f){o[9](f)}function u(f){o[10](f)}function i(f){o[11](f)}let d={top:"0",threshold:"0.5",bottom:"0.9",query:"article",$$slots:{foreground:[Qe],background:[Je]},$$scope:{ctx:o}};return o[2]!==void 0&&(d.count=o[2]),o[1]!==void 0&&(d.index=o[1]),o[3]!==void 0&&(d.progress=o[3]),e=new He({props:d}),I.push(()=>$(e,"count",s)),I.push(()=>$(e,"index",u)),I.push(()=>$(e,"progress",i)),{c(){Ne(e.$$.fragment)},l(f){Be(e.$$.fragment,f)},m(f,c){Ie(e,f,c),l=!0},p(f,c){const p={};c&262171&&(p.$$scope={dirty:c,ctx:f}),!t&&c&4&&(t=!0,p.count=f[2],ee(()=>t=!1)),!n&&c&2&&(n=!0,p.index=f[1],ee(()=>n=!1)),!r&&c&8&&(r=!0,p.progress=f[3],ee(()=>r=!1)),e.$set(p)},i(f){l||(F(e.$$.fragment,f),l=!0)},o(f){H(e.$$.fragment,f),l=!1},d(f){qe(e,f)}}}function Je(o){let e,t,n,r,l,s,u;return{c(){e=y("div"),t=O("index: "),n=O(o[1]),r=O(`
      poem: `),l=O(o[4]),s=O(`
      progress: `),u=O(o[3]),this.h()},l(i){e=w(i,"DIV",{slot:!0,class:!0});var d=R(e);t=T(d,"index: "),n=T(d,o[1]),r=T(d,`
      poem: `),l=T(d,o[4]),s=T(d,`
      progress: `),u=T(d,o[3]),d.forEach(v),this.h()},h(){C(e,"slot","background"),C(e,"class","svelte-19dopro")},m(i,d){P(i,e,d),b(e,t),b(e,n),b(e,r),b(e,l),b(e,s),b(e,u)},p(i,d){d&2&&q(n,i[1]),d&16&&q(l,i[4]),d&8&&q(u,i[3])},d(i){i&&v(e)}}}function pe(o){var r;let e,t=(((r=o[15].metadata)==null?void 0:r.created)||"")+"",n;return{c(){e=y("div"),n=O(t),this.h()},l(l){e=w(l,"DIV",{class:!0});var s=R(e);n=T(s,t),s.forEach(v),this.h()},h(){C(e,"class","date svelte-19dopro")},m(l,s){P(l,e,s),b(e,n)},p(l,s){var u;s&1&&t!==(t=(((u=l[15].metadata)==null?void 0:u.created)||"")+"")&&q(n,t)},d(l){l&&v(e)}}}function be(o){var p,h;let e,t,n=te(o[15])+"",r,l,s,u,i=o[15].content+"",d,f,c=((h=(p=o[15])==null?void 0:p.metadata)==null?void 0:h.title)!==void 0&&pe(o);return{c(){e=y("article"),t=y("p"),r=O(n),l=j(),c&&c.c(),s=j(),u=y("p"),d=O(i),f=j(),this.h()},l(a){e=w(a,"ARTICLE",{class:!0});var g=R(e);t=w(g,"P",{class:!0});var m=R(t);r=T(m,n),m.forEach(v),l=J(g),c&&c.l(g),s=J(g),u=w(g,"P",{class:!0});var k=R(u);d=T(k,i),k.forEach(v),f=J(g),g.forEach(v),this.h()},h(){C(t,"class","title svelte-19dopro"),C(u,"class","content svelte-19dopro"),C(e,"class","svelte-19dopro"),_e(e,"viewed",o[17]===o[1])},m(a,g){P(a,e,g),b(e,t),b(t,r),b(e,l),c&&c.m(e,null),b(e,s),b(e,u),b(u,d),b(e,f)},p(a,g){var m,k;g&1&&n!==(n=te(a[15])+"")&&q(r,n),((k=(m=a[15])==null?void 0:m.metadata)==null?void 0:k.title)!==void 0?c?c.p(a,g):(c=pe(a),c.c(),c.m(e,s)):c&&(c.d(1),c=null),g&1&&i!==(i=a[15].content+"")&&q(d,i),g&2&&_e(e,"viewed",a[17]===a[1])},d(a){a&&v(e),c&&c.d()}}}function Qe(o){let e,t=o[0],n=[];for(let r=0;r<t.length;r+=1)n[r]=be(me(o,t,r));return{c(){e=y("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=w(r,"DIV",{slot:!0,class:!0});var l=R(e);for(let s=0;s<n.length;s+=1)n[s].l(l);l.forEach(v),this.h()},h(){C(e,"slot","foreground"),C(e,"class","svelte-19dopro")},m(r,l){P(r,e,l);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(r,l){if(l&3){t=r[0];let s;for(s=0;s<t.length;s+=1){const u=me(r,t,s);n[s]?n[s].p(u,l):(n[s]=be(u),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&v(e),Ve(n,r)}}}function We(o){let e,t,n,r;const l=[je,Ke],s=[];function u(i,d){return i[5]?0:1}return e=u(o),t=s[e]=l[e](o),{c(){t.c(),n=de()},l(i){t.l(i),n=de()},m(i,d){s[e].m(i,d),P(i,n,d),r=!0},p(i,[d]){let f=e;e=u(i),e===f?s[e].p(i,d):(Me(),H(s[f],1,1,()=>{s[f]=null}),Ae(),t=s[e],t?t.p(i,d):(t=s[e]=l[e](i),t.c()),F(t,1),t.m(n.parentNode,n))},i(i){r||(F(t),r=!0)},o(i){H(t),r=!1},d(i){s[e].d(i),i&&v(n)}}}const Xe="https://api.github.com/repos/david-vanderhaar/verse-and-verve-data/contents/poems?ref=main";function Ye(o){const e=o.split("END_METADATA");e[0]=e[0].replace("END_METADATA","");const n=e[0].split(`
`).reduce((l,s)=>{const[u,i]=s.split(": ");return l[u]=i,l},{}),r=e[1].trim();return{metadata:n,content:r}}function Ze(o){return o.sort((e,t)=>{var l,s;const n=new Date((l=e.metadata)==null?void 0:l.created);return new Date((s=t.metadata)==null?void 0:s.created)-n})}function xe(o){return o.name.endsWith(".txt")}async function $e(o){const t=await(await fetch(o)).text();return Ye(t)}function te(o){var e,t;return((e=o==null?void 0:o.metadata)==null?void 0:e.title)||((t=o==null?void 0:o.metadata)==null?void 0:t.created)||""}function et(o,e,t){let n,r,l,s,u,i=[];ye(()=>{t(6,u=document.documentElement),d()});async function d(){const E=(await(await fetch(Xe)).json()).filter(xe).map(D=>$e(D.download_url)),V=await Promise.all(E);t(0,i=Ze(V))}let f,c,p;function h(m){f=m,t(2,f)}function a(m){c=m,t(1,c)}function g(m){p=m,t(3,p)}return o.$$.update=()=>{var m;o.$$.dirty&1&&t(5,n=i.length>0),o.$$.dirty&3&&t(8,r=i[c]),o.$$.dirty&256&&t(4,l=te(r)),o.$$.dirty&256&&t(7,s=((m=r==null?void 0:r.metadata)==null?void 0:m.color)||"#eadcbd"),o.$$.dirty&192&&(u==null||u.style.setProperty("--background-color",s))},[i,c,f,p,l,n,u,s,r,h,a,g]}class nt extends ve{constructor(e){super(),ke(this,e,et,We,Ee,{})}}export{nt as component};
